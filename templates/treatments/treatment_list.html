{% extends 'base.html' %}

{% block title %}Treatments - Aesthetics Clinic{% endblock %}

{% block content %}
{% load custom_tags %}

{% hero "Our Treatments" "Discover our range of luxury aesthetic treatments" %}

<!-- Gallery Filters -->
<section class="py-10 bg-light">
    <div class="container mx-auto">
        <div class="flex flex-wrap justify-center gap-4">
            <a href="{% url 'treatment_list' %}" 
               class="text-center min-w-40 max-w-40{% if not request.GET.category %}inline-block px-8 py-4 bg-white text-purple-900 rounded-full hover:bg-purple-100 transition-all duration-300 border-2 border-black {% else %}inline-block px-8 py-4 border-2 border-dark text-white rounded-full hover:bg-white/10 transition-all duration-300 inset-0 bg-gradient-to-r from-purple-900/70 to-pink-800/50{% endif %}" 
               data-filter="all">
               All Treatments
            </a>
            {% for category in categories %}
                {% with category_slug=category|slugify %}
                <a href="{% url 'treatment_list' %}?category={{ category.1|upper }}" 
                   class="text-center min-w-40 max-w-40{% if request.GET.category == category_slug %}inline-block px-8 py-4 bg-white text-black rounded-full hover:bg-purple-100 transition-all duration-300 border-2 border-black {% else %}inline-block px-8 py-4 border-2 border-dark text-white rounded-full hover:bg-white/10 transition-all duration-300 inset-0 bg-gradient-to-r from-purple-900/70 to-pink-800/50{% endif %}" 
                   data-filter="{{ category_slug }}">
                    {{ category.1 }}
                </a>
                {% endwith %}
            {% endfor %}
        </div>                   
    </div>
</section>

<!-- Treatments Grid -->
<section class="py-16">
  <div class="container mx-auto px-4">
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {% for treatment in treatments %}
      <div class="bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-lg transition-all">
        <div class="relative group">
          <img src="{{ treatment.image.url }}" alt="{{ treatment.name }}" class="w-full h-64 object-cover">
          <div class="absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition">
            <a href="{% url 'treatment_detail' treatment.slug %}" class="bg-white text-gray-900 font-semibold px-4 py-2 rounded-md hover:bg-gray-200 transition">Learn More</a>
          </div>
        </div>
        <div class="p-6 flex flex-col justify-between h-full">
          <div>
            <h3 class="text-xl font-semibold mb-2">{{ treatment.name }}</h3>
            <p class="text-gray-600 mb-4">{{ treatment.description|truncatewords:20 }}</p>
          </div>
          <div class="flex justify-between text-sm text-gray-500 mb-4">
            <span><i class="fas fa-clock mr-1"></i>{{ treatment.duration }}</span>
            <span><i class="fas fa-tag mr-1"></i>{{ treatment.price_range }}</span>
          </div>
          <a href="{% url 'treatment_detail' treatment.slug %}" class="inline-block border border-gray-800 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-900 hover:text-white transition">View Details</a>
        </div>
      </div>
      {% empty %}
      <div class="col-span-full text-center text-gray-500">
        <p>No treatments found in this category. Please check back soon or try a different category.</p>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- CTA Section -->
{% cta %}
{% endblock %}
