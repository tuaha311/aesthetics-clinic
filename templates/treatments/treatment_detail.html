{% extends 'base.html' %}

{% block title %}{{ treatment.name }} - Aesthetics Clinic{% endblock %}

{% block content %}
    <!-- Treatment Hero -->
    <section class="treatment-hero" style="background-image: url('{{ treatment.image.url }}');">
        <div class="container">
            <div class="treatment-hero-content">
                <h1>{{ treatment.name }}</h1>
                <div class="treatment-meta">
                    <span><i class="fas fa-clock"></i> {{ treatment.duration }}</span>
                    <span><i class="fas fa-tag"></i> {{ treatment.price_range }}</span>
                    <span><i class="fas fa-bookmark"></i> {{ treatment.get_category_display }}</span>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Treatment Content -->
    <section class="treatment-content">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="treatment-description">
                        <h2>Treatment Overview</h2>
                        <div class="treatment-text">
                            {{ treatment.description|linebreaks }}
                        </div>
                        
                        <h2 class="mt-5">What to Expect</h2>
                        <div class="treatment-text">
                            {{ treatment.what_to_expect|linebreaks }}
                        </div>
                    </div>
                    
                    {% if before_after %}
                    <!-- Before & After -->
                    <div class="before-after mt-5">
                        <h2>Before & After</h2>
                        <div class="row">
                            {% for image in before_after %}
                            <div class="col-md-6 mb-4">
                                <div class="before-after-container">
                                    <div class="before-image">
                                        <img src="{{ image.before_image.url }}" alt="Before {{ image.title }}" class="img-fluid">
                                        <span class="image-label">Before</span>
                                    </div>
                                    <div class="after-image">
                                        <img src="{{ image.after_image.url }}" alt="After {{ image.title }}" class="img-fluid">
                                        <span class="image-label">After</span>
                                    </div>
                                    <p class="before-after-title">{{ image.title }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                    {% if faqs %}
                    <!-- FAQs -->
                    <div class="treatment-faqs mt-5">
                        <h2>Frequently Asked Questions</h2>
                        <div class="accordion" id="faqAccordion">
                            {% for faq in faqs %}
                            <div class="accordion-item">
                                <h3 class="accordion-header" id="heading{{ faq.id }}">
                                    <button class="accordion-button {% if not forloop.first %}collapsed{% endif %}" type="button" 
                                            data-bs-toggle="collapse" data-bs-target="#collapse{{ faq.id }}" 
                                            aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}" 
                                            aria-controls="collapse{{ faq.id }}">
                                        {{ faq.question }}
                                    </button>
                                </h3>
                                <div id="collapse{{ faq.id }}" class="accordion-collapse collapse {% if forloop.first %}show{% endif %}" 
                                     aria-labelledby="heading{{ faq.id }}" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        {{ faq.answer|linebreaks }}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                    {% if testimonials %}
                    <!-- Testimonials -->
                    <div class="treatment-testimonials mt-5">
                        <h2>Client Testimonials</h2>
                        <div class="row">
                            {% for testimonial in testimonials %}
                            <div class="col-md-6 mb-4">
                                <div class="testimonial-item">
                                    <div class="testimonial-content">
                                        <div class="quote">
                                            <i class="fas fa-quote-left"></i>
                                        </div>
                                        <p>{{ testimonial.quote }}</p>
                                        <div class="client-info">
                                            {% if testimonial.image %}
                                            <img src="{{ testimonial.image.url }}" alt="{{ testimonial.name }}" class="client-image">
                                            {% endif %}
                                            <div class="client-details">
                                                <h4>{{ testimonial.name }}</h4>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
                
                <div class="col-lg-4">
                    <div class="treatment-sidebar">
                        <div class="sidebar-box booking-box">
                            <h3>Book This Treatment</h3>
                            <p>Ready to experience the benefits of {{ treatment.name }}? Book your consultation today.</p>
                            <a href="/contact/?booking=true&treatment={{ treatment.name }}" class="btn btn-primary btn-block">Book Now</a>
                        </div>
                        
                        {% if related_treatments %}
                        <div class="sidebar-box related-box">
                            <h3>Related Treatments</h3>
                            <ul class="related-treatments">
                                {% for related in related_treatments %}
                                <li>
                                    <a href="{% url 'treatment_detail' related.slug %}">
                                        <div class="related-treatment-image">
                                            <img src="{{ related.image.url }}" alt="{{ related.name }}" class="img-fluid">
                                        </div>
                                        <div class="related-treatment-info">
                                            <h4>{{ related.name }}</h4>
                                            <p>{{ related.price_range }}</p>
                                        </div>
                                    </a>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% endif %}
                        
                        <div class="sidebar-box contact-box">
                            <h3>Have Questions?</h3>
                            <p>Our experts are here to help you find the right treatment for your needs.</p>
                            <div class="contact-info">
                                <p><i class="fas fa-phone"></i> +123 456 7890</p>
                                <p><i class="fas fa-envelope"></i> info@aestheticsclinic.com</p>
                            </div>
                            <a href="/contact/" class="btn btn-outline-primary btn-block">Contact Us</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content text-center">
                <h2>Ready for Your Transformation?</h2>
                <p>Book your {{ treatment.name }} consultation today and take the first step toward the new you.</p>
                <a href="/contact/?booking=true&treatment={{ treatment.name }}" class="btn btn-lg btn-primary mt-4">Book Your Consultation</a>
            </div>
        </div>
    </section>
{% endblock %}

{% block extra_css %}
<style>
    .treatment-hero {
        height: 500px;
        background-size: cover;
        background-position: center;
        position: relative;
        display: flex;
        align-items: center;
    }
    
    .treatment-hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
    }
    
    .treatment-hero-content {
        position: relative;
        z-index: 2;
        color: var(--light-color);
    }
    
    .treatment-hero-content h1 {
        color: var(--light-color);
        font-size: 48px;
        margin-bottom: 20px;
    }
    
    .treatment-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
    }
    
    .treatment-meta span {
        font-size: 18px;
    }
    
    .treatment-content {
        padding: 80px 0;
    }
    
    .treatment-description h2 {
        font-size: 32px;
        margin-bottom: 20px;
    }
    
    .treatment-text {
        font-size: 16px;
        line-height: 1.8;
    }
    
    .treatment-sidebar {
        position: sticky;
        top: 100px;
    }
    
    .sidebar-box {
        background-color: var(--light-color);
        box-shadow: 0 5px 30px rgba(0, 0, 0, 0.05);
        padding: 30px;
        margin-bottom: 30px;
    }
    
    .booking-box {
        background-color: var(--secondary-color);
    }
    
    .sidebar-box h3 {
        margin-bottom: 20px;
        font-size: 24px;
    }
    
    .btn-block {
        width: 100%;
    }
    
    .related-treatments {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    .related-treatments li {
        margin-bottom: 20px;
    }
    
    .related-treatments a {
        display: flex;
        text-decoration: none;
        color: var(--text-color);
    }
    
    .related-treatment-image {
        width: 80px;
        height: 80px;
        margin-right: 15px;
        flex-shrink: 0;
        overflow: hidden;
    }
    
    .related-treatment-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .related-treatment-info h4 {
        margin-bottom: 5px;
        font-size: 16px;
    }
    
    .before-after-container {
        position: relative;
        display: flex;
        flex-wrap: wrap;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    }
    
    .before-image, .after-image {
        width: 50%;
        position: relative;
    }
    
    .image-label {
        position: absolute;
        bottom: 10px;
        left: 10px;
        background-color: var(--primary-color);
        color: var(--light-color);
        padding: 5px 15px;
        font-size: 12px;
        text-transform: uppercase;
    }
    
    .before-after-title {
        width: 100%;
        text-align: center;
        padding: 10px;
        margin: 0;
        background-color: var(--secondary-color);
    }
    
    .testimonial-item {
        background-color: var(--light-color);
        padding: 30px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        margin-bottom: 30px;
        position: relative;
    }
    
    .quote {
        position: absolute;
        top: 20px;
        left: 20px;
        font-size: 40px;
        color: var(--primary-color);
        opacity: 0.2;
    }
    
    .client-info {
        display: flex;
        align-items: center;
        margin-top: 20px;
    }
    
    .client-image {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 15px;
    }
    
    .accordion-button:not(.collapsed) {
        background-color: var(--secondary-color);
        color: var(--text-color);
    }
    
    .accordion-button:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 0.25rem rgba(212, 175, 122, 0.25);
    }
</style>
{% endblock %} 