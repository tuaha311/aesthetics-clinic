{% extends 'base.html' %}

{% block title %}{{ post.title }} | Aesthetics Clinic{% endblock %}

{% block content %}
<!-- Blog Hero Section -->
<section class="blog-detail-hero">
    <div class="container">
        <div class="blog-detail-header">
            <div class="post-meta">
                {% if post.category %}
                    <a href="{% url 'blog_category' post.category.slug %}" class="post-category">{{ post.category.name }}</a>
                {% endif %}
                <span class="post-date"><i class="far fa-calendar-alt"></i> {{ post.created_at|date:"F j, Y" }}</span>
                <span class="post-author"><i class="far fa-user"></i> {{ post.author.get_full_name|default:post.author.username }}</span>
            </div>
            <h1>{{ post.title }}</h1>
        </div>
    </div>
</section>

<!-- Blog Content Section -->
<section class="blog-content">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <article class="post-content">
                    <!-- Featured Image -->
                    <div class="featured-image">
                        {% if post.featured_image %}
                            <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="img-fluid">
                        {% else %}
                            <img src="/static/images/blog/placeholder.jpg" alt="{{ post.title }}" class="img-fluid">
                        {% endif %}
                    </div>
                    
                    <!-- Post Content -->
                    <div class="post-body">
                        {{ post.content|safe }}
                    </div>
                    
                    <!-- Post Tags -->
                    {% if post.tags.all %}
                    <div class="post-tags">
                        <span class="tags-label">Tags:</span>
                        <div class="tags-list">
                            {% for tag in post.tags.all %}
                                <a href="{% url 'blog_tag' tag.slug %}" class="tag">{{ tag.name }}</a>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Post Share -->
                    <div class="post-share">
                        <span class="share-label">Share:</span>
                        <div class="social-share">
                            <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="share-btn facebook"><i class="fab fa-facebook-f"></i></a>
                            <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title|urlencode }}" target="_blank" class="share-btn twitter"><i class="fab fa-twitter"></i></a>
                            <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}&title={{ post.title|urlencode }}" target="_blank" class="share-btn linkedin"><i class="fab fa-linkedin-in"></i></a>
                            <a href="mailto:?subject={{ post.title|urlencode }}&body={{ post.excerpt|urlencode }}%0A%0A{{ request.build_absolute_uri }}" class="share-btn email"><i class="far fa-envelope"></i></a>
                        </div>
                    </div>
                    
                    <!-- Author Bio -->
                    <div class="author-bio">
                        <div class="author-image">
                            {% if post.author.profile.avatar %}
                                <img src="{{ post.author.profile.avatar.url }}" alt="{{ post.author.get_full_name|default:post.author.username }}">
                            {% else %}
                                <img src="/static/images/avatar-placeholder.jpg" alt="{{ post.author.get_full_name|default:post.author.username }}">
                            {% endif %}
                        </div>
                        <div class="author-details">
                            <h3>{{ post.author.get_full_name|default:post.author.username }}</h3>
                            <p>{% if post.author.profile.bio %}{{ post.author.profile.bio }}{% else %}Aesthetics specialist and contributor at our clinic.{% endif %}</p>
                        </div>
                    </div>
                </article>
                
                <!-- Post Navigation -->
                <div class="post-navigation">
                    <div class="row">
                        {% if previous_post %}
                        <div class="col-md-6">
                            <a href="{% url 'blog_detail' previous_post.slug %}" class="nav-link prev">
                                <span class="nav-direction"><i class="fas fa-arrow-left"></i> Previous Article</span>
                                <h4>{{ previous_post.title|truncatechars:40 }}</h4>
                            </a>
                        </div>
                        {% endif %}
                        
                        {% if next_post %}
                        <div class="col-md-6 {% if not previous_post %}offset-md-6{% endif %}">
                            <a href="{% url 'blog_detail' next_post.slug %}" class="nav-link next">
                                <span class="nav-direction">Next Article <i class="fas fa-arrow-right"></i></span>
                                <h4>{{ next_post.title|truncatechars:40 }}</h4>
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <aside class="blog-sidebar">
                    <!-- About Widget -->
                    <div class="sidebar-widget about-widget">
                        <h3 class="widget-title">About Us</h3>
                        <div class="widget-content">
                            <p>Our aesthetics clinic provides premium non-surgical treatments to enhance your natural beauty. We believe in personalized care and advanced techniques.</p>
                            <a href="{% url 'about' %}" class="btn-sidebar">Learn More</a>
                        </div>
                    </div>
                    
                    <!-- Recent Posts Widget -->
                    <div class="sidebar-widget recent-posts-widget">
                        <h3 class="widget-title">Recent Articles</h3>
                        <div class="widget-content">
                            {% for recent_post in recent_posts %}
                                <div class="recent-post">
                                    <div class="recent-post-image">
                                        {% if recent_post.featured_image %}
                                            <img src="{{ recent_post.featured_image.url }}" alt="{{ recent_post.title }}">
                                        {% else %}
                                            <img src="/static/images/blog/placeholder-small.jpg" alt="{{ recent_post.title }}">
                                        {% endif %}
                                    </div>
                                    <div class="recent-post-info">
                                        <h4><a href="{% url 'blog_detail' recent_post.slug %}">{{ recent_post.title|truncatechars:50 }}</a></h4>
                                        <span class="date">{{ recent_post.created_at|date:"F j, Y" }}</span>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Consultation CTA Widget -->
                    <div class="sidebar-widget cta-widget">
                        <div class="widget-content">
                            <h3>Ready for a Consultation?</h3>
                            <p>Book a session with our aesthetics specialists to discuss your treatment options.</p>
                            <a href="{% url 'contact' %}" class="btn-primary">Book Consultation</a>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>
</section>

<!-- Related Posts Section -->
{% if related_posts %}
<section class="related-posts">
    <div class="container">
        <h2>Related Articles</h2>
        <div class="row">
            {% for related_post in related_posts %}
                <div class="col-lg-4 col-md-6">
                    <article class="blog-card">
                        <div class="blog-card-image">
                            {% if related_post.featured_image %}
                                <img src="{{ related_post.featured_image.url }}" alt="{{ related_post.title }}" class="img-fluid">
                            {% else %}
                                <img src="/static/images/blog/placeholder.jpg" alt="{{ related_post.title }}" class="img-fluid">
                            {% endif %}
                        </div>
                        <div class="blog-card-content">
                            <h3><a href="{% url 'blog_detail' related_post.slug %}">{{ related_post.title }}</a></h3>
                            <div class="post-meta">
                                <span class="post-date"><i class="far fa-calendar-alt"></i> {{ related_post.created_at|date:"F j, Y" }}</span>
                            </div>
                            <div class="post-excerpt">
                                {{ related_post.excerpt|truncatewords:15 }}
                            </div>
                            <a href="{% url 'blog_detail' related_post.slug %}" class="read-more">Read More <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </article>
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Newsletter Section -->
<section class="newsletter-section">
    <div class="container">
        <div class="newsletter-wrapper">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <div class="newsletter-content">
                        <h2>Subscribe to Our Newsletter</h2>
                        <p>Stay updated with the latest aesthetics trends, treatment innovations, and exclusive offers.</p>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="newsletter-form">
                        <form action="{% url 'newsletter_signup' %}" method="post">
                            {% csrf_token %}
                            <div class="input-group">
                                <input type="email" name="email" placeholder="Your email address" required>
                                <button type="submit" class="btn-subscribe">Subscribe</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/blog.css">
{% endblock %} 