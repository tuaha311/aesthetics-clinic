{% extends 'base.html' %}

{% block title %}Luxury Aesthetic Treatments | Aesthetics Clinic{% endblock %}

{% block content %}
<!-- Hero Section with Parallax -->
<section class="relative h-[60vh] overflow-hidden">
    <div class="absolute inset-0">
        <img src="/static/images/treatments-hero.jpg" alt="Treatments" 
             class="w-full h-full object-cover object-center scale-110 transform motion-safe:animate-subtle-zoom">
        <div class="absolute inset-0 bg-gradient-to-r from-purple-900/80 via-purple-800/70 to-pink-800/60"></div>
    </div>
    <div class="relative h-full flex items-center justify-center text-center">
        <div class="max-w-3xl px-4">
            <h1 class="text-4xl md:text-6xl font-serif text-white mb-6" data-aos="fade-up">
                Discover Our Premium Treatmentss
            </h1>
            <p class="text-lg md:text-xl text-gray-200 mb-8" data-aos="fade-up" data-aos-delay="100">
                Experience the perfect harmony of science and luxury in our carefully curated treatments
            </p>
        </div>
    </div>
</section>

<!-- Floating Category Filter -->
<div class="sticky top-20 z-30 bg-white/80 backdrop-blur-lg shadow-md py-4 transition-all duration-300">
    <div class="container mx-auto px-4">
        <div class="flex flex-nowrap overflow-x-auto gap-3 pb-2 md:justify-center md:flex-wrap scrollbar-hide">
            <button class="category-btn active min-w-[120px] bg-purple-900 text-white px-6 py-2.5 rounded-full hover:bg-purple-800 transition-all" 
                    data-category="all">
                All Treatments
            </button>
            {% for category in categories %}
            <button class="category-btn min-w-[120px] bg-white border border-purple-200 text-purple-900 px-6 py-2.5 rounded-full hover:bg-purple-50 transition-all" 
                    data-category="{{ category.slug }}">
                {{ category.name }}
            </button>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Treatments Grid -->
<section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="treatmentsGrid">
            {% for treatment in treatments %}
            <div class="treatment-item group" data-category="{{ treatment.category }}" data-aos="fade-up" data-aos-delay="{{ forloop.counter|multiply:100 }}">
                <div class="relative overflow-hidden rounded-2xl bg-white shadow-lg transition-all duration-300 hover:shadow-2xl">
                    <div class="relative h-64 overflow-hidden">
                        <img src="{{ treatment.image_url }}" 
                             alt="{{ treatment.name }}" 
                             class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700">
                        <div class="absolute inset-0 bg-gradient-to-t from-purple-900/90 via-purple-900/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    </div>
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-semibold text-gray-900">{{ treatment.name }}</h3>
                            <span class="text-sm font-medium text-purple-600 bg-purple-50 px-3 py-1 rounded-full">
                                {{ treatment.category }}
                            </span>
                        </div>
                        <p class="text-gray-600 mb-4">{{ treatment.description|truncatewords:20 }}</p>
                        <div class="flex items-center justify-between text-sm text-gray-500 mb-6">
                            <span class="flex items-center">
                                <i class="far fa-clock mr-2"></i>{{ treatment.duration }}
                            </span>
                            <span class="flex items-center">
                                <i class="far fa-gem mr-2"></i>{{ treatment.price }}
                            </span>
                        </div>
                        <a href="{{ treatment.link }}" 
                           class="block w-full text-center bg-white border-2 border-purple-900 text-purple-900 px-6 py-2.5 rounded-full hover:bg-purple-900 hover:text-white transition-all duration-300">
                            Learn More
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Treatment Process -->
<section class="py-20 bg-white">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl md:text-4xl font-serif text-center mb-16">Your Treatment Journey</h2>
        <div class="relative">
            <div class="hidden md:block absolute top-1/2 left-0 right-0 h-0.5 bg-purple-100 -translate-y-1/2"></div>
            <div class="grid md:grid-cols-3 gap-8">
                {% for step in treatment_steps %}
                <div class="relative" data-aos="fade-up" data-aos-delay="{{ forloop.counter|multiply:100 }}">
                    <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow">
                        <div class="w-16 h-16 mx-auto bg-purple-900 text-white rounded-full flex items-center justify-center text-2xl font-bold mb-6">
                            {{ forloop.counter }}
                        </div>
                        <h3 class="text-xl font-semibold text-center mb-4">{{ step.title }}</h3>
                        <p class="text-gray-600 text-center">{{ step.description }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Booking CTA -->
<section class="relative py-20 overflow-hidden">
    <div class="absolute inset-0">
        <img src="/static/images/booking-bg.jpg" alt="Booking" class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-purple-900/90"></div>
    </div>
    <div class="relative container mx-auto px-4 text-center">
        <h2 class="text-3xl md:text-4xl font-serif text-white mb-6">Ready to Begin Your Transformation?</h2>
        <p class="text-lg text-gray-200 mb-8 max-w-2xl mx-auto">
            Book a consultation with our experts and discover the perfect treatment plan for you
        </p>
        <a href="{% url 'booking' %}" 
           class="inline-block bg-white text-purple-900 px-8 py-4 rounded-full hover:bg-purple-50 transition-all">
            Book Your Consultation
        </a>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', () => {
    const categoryButtons = document.querySelectorAll('.category-btn');
    const treatmentItems = document.querySelectorAll('.treatment-item');

    categoryButtons.forEach(button => {
        button.addEventListener('click', () => {
            const category = button.dataset.category;
            
            // Update active button state
            categoryButtons.forEach(btn => {
                btn.classList.remove('bg-purple-900', 'text-white');
                btn.classList.add('bg-white', 'text-purple-900');
            });
            button.classList.remove('bg-white', 'text-purple-900');
            button.classList.add('bg-purple-900', 'text-white');

            // Filter treatments
            treatmentItems.forEach(item => {
                const itemCategory = item.dataset.category;
                if (category === 'all' || category === itemCategory) {
                    item.style.display = '';
                    item.classList.add('fade-in');
                } else {
                    item.style.display = 'none';
                    item.classList.remove('fade-in');
                }
            });
        });
    });
});
</script>
<style>
.fade-in {
    animation: fadeIn 0.5s ease-in forwards;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.scrollbar-hide::-webkit-scrollbar {
    display: none;
}

@keyframes subtle-zoom {
    from { transform: scale(1.1); }
    to { transform: scale(1.15); }
}

.animate-subtle-zoom {
    animation: subtle-zoom 20s ease-in-out infinite alternate;
}
</style>
{% endblock %}
